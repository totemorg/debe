{"version":3,"file":"index.umd.development.cjs","sources":["../src/index.ts"],"sourcesContent":["/**\n * Created by user on 2018/5/7/007.\n */\n\nimport { fill as _fillRange } from '@bluelovers/fill-range';\nimport { TABLE_RANGE } from '@lazy-cjk/regexp-range-table';\nimport { array_unique_overwrite } from 'array-hyper-unique';\n\nexport { TABLE_RANGE }\n\nexport type IOptions = {\n\n\t/**\n\t * 字元範圍表\n\t */\n\tdataTables?: typeof TABLE_RANGE,\n\n\t/**\n\t * 回傳 陣列\n\t */\n\tarrayMode?: boolean,\n\n\t/**\n\t * 回傳 字串\n\t */\n\tcreateRegExpString?: boolean,\n\t/**\n\t * 回傳由 [] 包覆的字串\n\t */\n\tcreateRegExpClass?: boolean,\n\n\t/**\n\t * 找到第一個就停止\n\t */\n\tfindFirstOne?: boolean,\n}\n\nexport function matchRange(from: string | number, to: string | number, options: IOptions & {\n\tcreateRegExpString: true,\n}): string\nexport function matchRange(from: string | number, to: string | number, options?: IOptions): string[]\nexport function matchRange(from: string | number, to: string | number, options: IOptions = {}): string[] | string\n{\n\toptions = getOptions(options);\n\n\tlet s = from as string;\n\tlet e = to as string;\n\n\tlet ret: string[] = [];\n\n\tlet findFirstOne = !!options.findFirstOne;\n\n\tObject\n\t\t.keys(options.dataTables)\n\t\t// @ts-ignore\n\t\t.some(function (key: keyof typeof options.dataTables): boolean\n\t\t{\n\t\t\tlet bool: boolean;\n\n\t\t\toptions.dataTables[key].some(function (arr): boolean\n\t\t\t{\n\t\t\t\tlet i = arr.indexOf(s);\n\t\t\t\tlet j = arr.indexOf(e, i);\n\n\t\t\t\tif (i !== -1 && j !== -1)\n\t\t\t\t{\n\t\t\t\t\tret.push(...arr.slice(i, j + 1));\n\n\t\t\t\t\tbool = true;\n\t\t\t\t\treturn findFirstOne;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (bool)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t})\n\t;\n\n\tif (!ret || !ret.length)\n\t{\n\t\treturn null;\n\t}\n\n\tarray_unique_overwrite(ret);\n\n\tif (options.createRegExpString)\n\t{\n\t\treturn toRegExpString(ret, options.createRegExpClass);\n\t}\n\n\treturn ret;\n}\n\nexport function toRegExpString(arr: string[], warpClass?: boolean)\n{\n\tif (arr.length === 1)\n\t{\n\t\treturn arr[0];\n\t}\n\n\tlet s = arr.join('');\n\n\treturn warpClass ? '[' + s + ']' : s;\n}\n\nexport function fillRange(from: string | number, to: string | number, options: IOptions = {}): string[]\n{\n\toptions = getOptions(options);\n\n\tlet s = from;\n\tlet e = to;\n\n\tlet ret: string[] = null;\n\n\tret = matchRange(from, to, options);\n\n\tif (!ret && (options.arrayMode || String(s).length === 1 && String(e).length === 1))\n\t{\n\t\tlet _ok: boolean;\n\n\t\tif (typeof s === 'string' && typeof e === 'string')\n\t\t{\n\t\t\tlet a = s.charCodeAt(0);\n\t\t\tlet b = e.charCodeAt(0);\n\n\t\t\t_ok = a <= b;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_ok = true;\n\t\t}\n\n\t\tif (_ok)\n\t\t{\n\t\t\tret = _fillRange(s, e);\n\t\t}\n\n\t\tif (!ret?.length)\n\t\t{\n\t\t\tret = null;\n\t\t}\n\t}\n\n\tif (Array.isArray(ret))\n\t{\n\t\tret = ret.map(v => String(v));\n\t}\n\n\treturn ret;\n}\n\nexport function getOptions(options: IOptions): IOptions\n{\n\tlet opts = Object.assign({} as IOptions, options);\n\n\topts.dataTables = opts.dataTables || TABLE_RANGE;\n\n\treturn opts;\n}\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(matchRange, \"__esModule\", { value: true });\n\n\tObject.defineProperty(matchRange, 'matchRange', { value: matchRange });\n\tObject.defineProperty(matchRange, 'default', { value: matchRange });\n\n\tObject.defineProperty(matchRange, 'getOptions', {\n\t\tvalue: getOptions,\n\t});\n\tObject.defineProperty(matchRange, 'toRegExpString', {\n\t\tvalue: toRegExpString,\n\t});\n\tObject.defineProperty(matchRange, 'TABLE_RANGE', {\n\t\tvalue: TABLE_RANGE,\n\t});\n\tObject.defineProperty(matchRange, 'fillRange', {\n\t\tvalue: fillRange,\n\t});\n}\n\nexport default matchRange;\n"],"names":["Object","keys","options","some","key","bool","dataTables","arr","indexOf","s","ret","array_unique_overwrite","toRegExpString","warpClass","to"],"mappings":";;;;;;;;CAyCA,EAAA,IAAA,CAAA,GAAA,IAAA,CAAA;CAEC,EAAA,IAAA,CAAA,GAAA,EAAA,CAAA;CAKI,EAAA,IAAA,GAAA,GAAA,EAAA,CAAA;;CAwDJA,EAAAA,MAAgB,CAGXC,IAAA,CAAAC,kBAAoB,CAAqB,CAI1CC,IAAC,CAAQC,UAAAA,GAAAA,EAAAA;CACT,IAAA,IAACC,IAAM,CAAA;CAIRH,IAAAA,OAAc,CAAAI,UAAA,CAAA,GAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;CAIhB,MAAA,IAAA,CAAA,GAAiBC,GAAA,CAAAC,OAAA,CAAAC,CAAA,CAAA,CAAA;;iBAKZ;SAEJC,GAAG,CAAA,IAAA,CAAA,GAAA,GAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA;SACHL,IAAA,GAAA,IAAA,CAAA;;CAMD,OAAA;;CAKAA,IAAAA,IAAAA,IAAA,EAAA;CAGC,MAAA,OAAA,IAAA,CAAA;;;eAQF;CACA,IAAA,OAAA,IAAA,CAAA;;CAQA,EAAAM,uCAAA,CAAA,GAAA,CAAA,CAAA;cACA,CAAA,kBAAA,EAAA;CAGGC,IAAAA,OAAAA,cAAAA,CAAAA,GAAAA,EAAAA,OAAAA,CAAAA,iBAAAA,CAAAA,CAAAA;CAEH,GAAA;CAKA,EAAA,OAAAF,GAAA,CAAA;;CAGA,SAAA,cAAA,CAAA,GAAA,EAAA,SAAA,EAAA;CAEC,EAAA,IAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;CAEA,IAAA,OAAAH,GAAK,CAAA,CAAA,CAAA,CAAA;;CAGLE,EAAAA,IAAAA,CAAAA,GAAAA,GAAAA,CAAAA,IAAAA,CAAAA,EAAAA,CAAAA,CAAAA;CAED,EAAA,OAAAI,SAAA,GAAA,GAAA,GAAA,CAAA,GAAA,GAAA,GAAA,CAAA,CAAA;CAED,CAAA;CAAAC,SAAAA,SAAAA,CAAAA,IAAAA,EAAAA,EAAAA,EAAAA,OAAAA,GAAAA,EAAAA,EAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}