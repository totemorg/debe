# [MAN](https://www.npmjs.com/package/@totemorg/man)

Extends [MathJX](https://www.npmjs.com/package/@totemorg/mathjx) with various AI/ML methods:

* [light weight image processing](https://www.npmjs.com/package/jimp)  
* [symbolic algebra](https://www.npmjs.com/package/mathjs)  
* time series analysis (
	[digital signal](https://www.npmjs.com/package/dsp), 
	[spectral](https://www.npmjs.com/package/fft-js))  
* hidden markov methods (
	[viterbi, baum-welch](https://www.npmjs.com/package/nodehmm), 
	[EM](https://www.npmjs.com/package/expectation-maximization))  
* matrix decompositions (
	[eigen spectrums](https://www.npmjs.com/package/node-svd))  
* [bayesian belief networks](https://www.npmjs.com/package/jsbayes)  
* [recurrent neural networks](https://www.npmjs.com/package/recurrent-js)  
* [convolutional neural networks](http://caffe.berkeleyvision.org/)  
* regression methods (
	[logistic](https://www.npmjs.com/package/ml-logistic-regression), 
	[support vector](https://www.npmjs.com/package/node-svm), 
	[other](https://www.npmjs.com/package/ml))  
* non-linear optimizers (
	[least cost path](https://www.npmjs.com/package/edmonds-blossom),
	[linear programming](https://www.npmjs.com/package/javascript-lp-solver),
	[gradient descent, newton-raphton](https://www.npmjs.com/package/newton-raphson-method))  
* neural networks (
	[convolutional](https://www.npmjs.com/package/@tensorflow/tfjs),
	[language models](https://www.npmjs.com/package/@tensorflow/tfjs))  
* special functions (
	[gamma](https://www.npmjs.com/package/gamma), 
	[multivariate normal](https://www.npmjs.com/package/multivariate-normal), 
	[rieman-zeta](https://www.npmjs.com/package/math-riemann-zeta)).

See the Program Reference for method details.

## Usage

Acquire and optionally configure **MAN** as follows:

	const $ = require("man").config({
		key: value, 						// set key
		"key.key": value, 					// indexed set
		"key.key.": value					// indexed append
	});

where configuration keys follow [ENUMS deep copy conventions](https://www.npmjs.com/package/@totemorg/enums)

## Manage

	npm install @totemorg/enums	# install
	npm run start [ ? | $ | ...]	# Unit test
	npm run verminor				# Roll minor version
	npm run vermajor				# Roll major version
	npm run redoc					# Regen documentation
	
## Program Reference
<details>
<summary>
<i>Open/Close</i>
</summary>
## Modules

<dl>
<dt><a href="#MAN.module_String">String</a></dt>
<dd></dd>
<dt><a href="#MAN.module_Array">Array</a></dt>
<dd></dd>
<dt><a href="#MAN.module_JIMP">JIMP</a></dt>
<dd></dd>
<dt><a href="#module_MAN">MAN</a></dt>
<dd><p>Add AI/ML methods to the <a href="https://www.npmjs.com/package/@totemstan/mathjx">MathJX</a>.
This module documented in accordance with <a href="https://jsdoc.app/">jsdoc</a>.</p>
</dd>
</dl>

<a name="MAN.module_String"></a>

## String
<a name="MAN.module_String..$"></a>

### String~$()
**Kind**: inner method of [<code>String</code>](#MAN.module_String)  
<a name="MAN.module_Array"></a>

## Array

* [Array](#MAN.module_Array)
    * [~copy()](#MAN.module_Array..copy)
    * [~dist()](#MAN.module_Array..dist)
    * [~nearestOf()](#MAN.module_Array..nearestOf)
    * [~batch()](#MAN.module_Array..batch)
    * [~flush()](#MAN.module_Array..flush)
    * [~draw()](#MAN.module_Array..draw)
    * [~match()](#MAN.module_Array..match)
    * [~replace()](#MAN.module_Array..replace)
    * [~$(index, ctx)](#MAN.module_Array..$) ⇒ <code>Object</code>
    * [~$$()](#MAN.module_Array..$$)
    * [~unique()](#MAN.module_Array..unique)

<a name="MAN.module_Array..copy"></a>

### Array~copy()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..dist"></a>

### Array~dist()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..nearestOf"></a>

### Array~nearestOf()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..batch"></a>

### Array~batch()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..flush"></a>

### Array~flush()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..draw"></a>

### Array~draw()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..match"></a>

### Array~match()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..replace"></a>

### Array~replace()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..$"></a>

### Array~$(index, ctx) ⇒ <code>Object</code>
Index an array using a indexor:

	string of the form "to=from & to=eval & to & ... & !where=eval"
	hash of the form {to: from, ...}
	callback of the form (idx,array) => { ... }

The "!where" clause returns only records having a nonzero eval.

**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
**Returns**: <code>Object</code> - Aggregated data  

| Param | Type | Description |
| --- | --- | --- |
| index | <code>String</code> \| <code>Object</code> \| <code>function</code> | Indexer |
| ctx | <code>Object</code> | Context of functions etc |

**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("u=x+1&v=sin(y)&!where=x>5",Math)
{ u: [ 11 ], v: [ 0.9129452507276277 ] }
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("x")
{ x: [ 1, 10 ] }
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("x&mydata=y")
{ mydata: [ 2, 20 ], x: [ 1, 10 ] }
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("mydata=[x,y]")
{ mydata: [ [ 1, 2 ], [ 10, 20 ] ] }
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("mydata=x+1")
{ mydata: [ 2, 11 ] }
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("",{"!all":1})
{ x: [ 1, 10 ], y: [ 2, 20 ] }
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("")
[ { x: 1, y: 2 }, { x: 10, y: 20 } ]
```
**Example**  
```js
[{x:1,y:2},{x:10,y:20}].$("u")
{ u: [ undefined, undefined ] }
```
**Example**  
```js
[[1,2,3],[10,20,30]].$("1&0")
{ '0': [ 1, 10 ], '1': [ 2, 20 ] }	
```
<a name="MAN.module_Array..$$"></a>

### Array~$$()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_Array..unique"></a>

### Array~unique()
**Kind**: inner method of [<code>Array</code>](#MAN.module_Array)  
<a name="MAN.module_JIMP"></a>

## JIMP

* [JIMP](#MAN.module_JIMP)
    * [~save()](#MAN.module_JIMP..save)
    * [~sym()](#MAN.module_JIMP..sym)

<a name="MAN.module_JIMP..save"></a>

### JIMP~save()
**Kind**: inner method of [<code>JIMP</code>](#MAN.module_JIMP)  
<a name="MAN.module_JIMP..sym"></a>

### JIMP~sym()
**Kind**: inner method of [<code>JIMP</code>](#MAN.module_JIMP)  
<a name="module_MAN"></a>

## MAN
Add AI/ML methods to the [MathJX](https://www.npmjs.com/package/@totemstan/mathjx).
This module documented in accordance with [jsdoc](https://jsdoc.app/).

**Requires**: <code>module:[enums](https://www.npmjs.com/package/@totemstan/enums)</code>, <code>module:[mathjx](https://www.npmjs.com/package/@totemstan/mathjx)</code>, <code>module:[crypto](https://nodejs.org/docs/latest/api/)</code>, <code>module:[mathjs](https://www.npmjs.com/package/mathjs)</code>, <code>module:[fft-js](https://www.npmjs.com/package/fft-js)</code>, <code>module:[nodehmm](https://www.npmjs.com/package/nodehmm)</code>, <code>module:[node-svd](https://www.npmjs.com/package/node-svd)</code>, <code>module:[node-svm](https://www.npmjs.com/package/node-svm)</code>, <code>module:[mljs](https://www.npmjs.com/package/mljs)</code>, <code>module:[jimp](https://www.npmjs.com/package/jimp)</code>, <code>module:[jsbayes](https://www.npmjs.com/package/jsbayes)</code>, <code>module:[recurrent-js](https://www.npmjs.com/package/recurrent-js)</code>, <code>module:[gamma](https://www.npmjs.com/package/gamma)</code>, <code>module:[expectation-maximization](https://www.npmjs.com/package/expectation-maximization)</code>, <code>module:[multivariate-normal](https://www.npmjs.com/package/multivariate-normal)</code>, <code>module:[newton-raphson](https://www.npmjs.com/package/newton-raphson)</code>, <code>module:[random-seed](https://www.npmjs.com/package/random-seed)</code>, <code>module:[edmonds-blossom](https://www.npmjs.com/package/edmonds-blossom)</code>, <code>module:[simple-simplex](https://www.npmjs.com/package/simple-simplex)</code>, <code>module:[tensorflow/tfjs](https://www.npmjs.com/package/@tensorflow/tfjs)</code>  
**Author**: [ACMESDS](https://totemstan.github.io)  
**Example**  
```js
### Eval a js or mathjs script in a context ctx:

	var 
		ctx = $( "script", ctx, ctx => {   // eval with callback
			Trace("updated context", ctx);
		} ),

		ctx = "script".$( ctx ),		// abbreviated

		{ x, y, ... } = "script".$( ctx ) || {};	// with context x,y extractions
```
**Example**  
```js
### Create a matrix:

	var 
		A = $( N, (n,A) => A[n] = ... ) ,  // define N-length vector 
		A = $( [M,N], (n,m,A) => A[m][n] = ... ) ;	// define M x N matrrix
```
**Example**  
```js
### Index a matrix:

	A.$( (n,A) => A[n] = ... ) 	// index vector with callback
	A.$$( (n,m,A) => A[n][m] = ... ) 	// index matrix with callback
```
**Example**  
```js
### Sample a matrix with optional callback cb(val):

	var 
		B = A.get( idx , cb),
		B = A.get( "key, ...", cb ),
		B = A.get( [idx, ...] , cb),
		B = A.get( [key, ...] , cb ),
		B = A.get( {rekey: { toKey: "fromKey", ... }, cb ),
		B = A.get( {draw: N}, cb ),
		B = A.get( {start:N, count:N}, cb ),
		B = A.get( {KEY_starts: "with", ...}, cb ),
		B = A.get( {KEY_ends: "with", ...}, cb )
```
**Example**  
```js
### Import functions to $.somefn and to $( "somefn(...)" )

	$( {
		somefn: function (args) { ... },
		:
		:
	} );
```
**Example**  
```js
### Use the task sharder:

	$( { 
		keys: "i,j,k",  	// array indicies
		i: [0,1,2,3],  		// domain of index i
		j: [4,8],				// domain of index j
		k: [0],					// domain of index k
		qos: 0,				// regulation time in ms if not zero
		local: false, 		// enable to run task local, i.e. w/o workers and nodes
		workers: 4, 		// limit number of workers (aka cores) per node
		nodes: 3 			// limit number of nodes (ala locales) in the cluster
	}, 

		// here, a simple task that returns a message 
		$ => "my result is " + (i + j*k) + " from " + $.worker + " on "  + $.node,

		// here, a simple callback that displays the task results
		msg => console.log(msg) 
	);
```
**Example**  
```js
### Aggregate and save events ev = {at: "KEY", ...} to ctx.Save_KEY with 
callback cb(unsaved events)

	[ev, ...].save( ctx, evs => { ... } );
	"query".save( ctx, evs => { ... } );
```
**Example**  
```js
### Usage methods of $().

	const $ = require("man")
	$( "mathjs script", ctx, ctx => { ... } )
	$( "mathjs script", ctx )
	$( "mathjs script" )
	$( [M,N], (m,n,A) => { A[m][n] = ... } )
	$( N, (n,A) => { A[n] = ... } )
	$({	// import functions
		f: (...) => { ... },
		...
	})
	$({	// task sharding
			keys: "i,j,...",  	// array indicies
			i: [...],  		// domain of index i
			j: [...],				// domain of index j
			k: [...],					// domain of index k
			qos: N,				// regulation time in ms if not zero
			local: false, 		// enable to run task local, i.e. w/o workers and nodes
			workers: N, 		// limit number of workers (aka cores) per node
			nodes: N 			// limit number of nodes (ala locales) in the cluster
		}, 

		// here, a simple task that returns a message 
		$ => "my result is " + (i + j*k) + " from " + $.worker + " on "  + $.node,

		// here, a simple callback that displays the task results
		msg => console.log(msg) 
	);
```
**Example**  
```js
### Eval a mathjs script with optional callback and optional context:

	var 
		ctx = $( "mathjs script", ctx, ctx => {   
			x: 1, 
			y: 20, ...
		} );
```
**Example**  
```js
### Eval with extraction of context keys:

	const {x, y, ... } = $( "mathjs script", ctx ) || {};
```
**Example**  
```js
### import functions to $.somefn and to $( "somefn(...)" )
	$( {
		somefn: function (args) { ... },
		:
		:
	} );
```
**Example**  
```js
### Use the task sharder:

	$( { 
			keys: "i,j,k",  	// array indicies
			i: [0,1,2,3],  		// domain of index i
			j: [4,8],				// domain of index j
			k: [0],					// domain of index k
			qos: 0,				// regulation time in ms if not zero
			local: false, 		// enable to run task local, i.e. w/o workers and nodes
			workers: 4, 		// limit number of workers (aka cores) per node
			nodes: 3 			// limit number of nodes (ala locales) in the cluster
		}, 

		// here, a simple task that returns a message 
		$ => "my result is " + (i + j*k) + " from " + $.worker + " on "  + $.node,

		// here, a simple callback that displays the task results
		msg => console.log(msg) 
	);	
```

* [MAN](#module_MAN)
    * [~scripts](#module_MAN..scripts)
        * [.conf](#module_MAN..scripts.conf)
        * [.pca](#module_MAN..scripts.pca)
        * [.roc](#module_MAN..scripts.roc)
        * [.snr](#module_MAN..scripts.snr)
        * [.p0](#module_MAN..scripts.p0)
        * [.pw](#module_MAN..scripts.pw)
        * [.wk](#module_MAN..scripts.wk)
        * [.trigger()](#module_MAN..scripts.trigger)

<a name="module_MAN..scripts"></a>

### MAN~scripts
**Kind**: inner property of [<code>MAN</code>](#module_MAN)  

* [~scripts](#module_MAN..scripts)
    * [.conf](#module_MAN..scripts.conf)
    * [.pca](#module_MAN..scripts.pca)
    * [.roc](#module_MAN..scripts.roc)
    * [.snr](#module_MAN..scripts.snr)
    * [.p0](#module_MAN..scripts.p0)
    * [.pw](#module_MAN..scripts.pw)
    * [.wk](#module_MAN..scripts.wk)
    * [.trigger()](#module_MAN..scripts.trigger)

<a name="module_MAN..scripts.conf"></a>

#### scripts.conf
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.pca"></a>

#### scripts.pca
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.roc"></a>

#### scripts.roc
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.snr"></a>

#### scripts.snr
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.p0"></a>

#### scripts.p0
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.pw"></a>

#### scripts.pw
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.wk"></a>

#### scripts.wk
**Kind**: static property of [<code>scripts</code>](#module_MAN..scripts)  
<a name="module_MAN..scripts.trigger"></a>

#### scripts.trigger()
**Kind**: static method of [<code>scripts</code>](#module_MAN..scripts)  
</details>

## Contacting, Contributing, Following

Feel free to 
* submit and status [TOTEM issues](http://totem.hopto.org/issues.view) 
* contribute to [TOTEM notebooks](http://totem.hopto.org/shares/notebooks/) 
* revise [TOTEM requirements](http://totem.hopto.org/reqts.view) 
* browse [TOTEM holdings](http://totem.hopto.org/) 
* or follow [TOTEM milestones](http://totem.hopto.org/milestones.view) 

## License

[MIT](LICENSE)


* * *

&copy; 2012 ACMESDS